# 펌웨어 (Firmware)

> 하드웨어의 제어와 구동을 담당하는 운영체제
>
> 대표적인 예 PC 메인보드의 BIOS



예전의 기기들은 펌웨어가 보통 ROM에 저장이 되곤 했다.

ROM은 수정이 불가능한 메모리이기 때문에 한 번 펌웨어가 들어가게 되면 수정이 어려웠다.



Atmega128과 같은 칩을 mcu 라고 하며 이 mcu를  제어하기 위한 코드를 말한다.



펌웨어는 어떻게 MCU에 넣어주게 될까?

일반적으로는 다운로더 툴이 따로 있다.

사용하는 툴 마다 다르다.

한쪽이 MCU 쪽에 연결하고 한 쪽은 컴퓨터에 연결하여 펌웨어를 다운로드 해주면 된다.



펌웨어의 개념 자체는 어려운 내용은 아니나, 실제로 mcu를 컨트롤하는 것은 너무 어렵다.



## mcu란?

> Micro Controller Unit, 마이크로 컨트롤러
>
> 프로그래밍을 통해 '제어', '연산' 작업이 가능
>
> 회로나 LED, 모터 등을 제어할 수 있고 LCD에 글씨를 쓸 수 있다.



- 마이크로 프로세서, 메모리, 프로그램 가능한 입출력 모듈을 하나의 칩으로 만든 것
- 프로그래밍을 통해 제어나 연산이 가능
- 세탁기, TV, 냉장고 등 대부분의 가전제품에 mcu가 들어가면 그 기능은 프로그래밍을 통해서 구현



## 펌웨어 업데이트

![image-20220420153711543](https://tva1.sinaimg.cn/large/e6c9d24egy1h1g6gc9yccj20aw0ejwfv.jpg)

1. 갈색 케이블 방향이 보드상의 오른쪽 세로 6핀의 아래쪽으로 연결

2. PC 프로그램

   - 첨부파일 `Flashtool.zip` 파일 사용

   - 압축해제 후 `Flash.bat` 실행 (메모장으로 키기)

     앞 부분 일부 발췌

     ```
      esptool.exe --chip esp32 --port COM7 --baud 921600
     ```

   - PC와 마이크로 5핀 케이블로 다운로드 보드 연결하면 COM Port가 잡힘(장치관리자에서 확인)

     위의 `--port COM7` 부분을 장치관리자에서 확인한 포트 번호로 변경

   - `Flash.bat` 실행 직전에 다운로드 보드 RST 버튼 한번 먼저 누르기

     ![image-20220420154136214](https://tva1.sinaimg.cn/large/e6c9d24egy1h1g6kv1p6hj20aw0ejjsb.jpg)



---

참고사이트

티스토리 : https://gdnn.tistory.com/32, https://gdnn.tistory.com/120