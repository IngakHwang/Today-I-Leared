# 프로그램, 프로세스, 스레드

> 프로그램 : 작업을 위해 실행하는 파일, 프로세스 : 메모리에 올라와 실행되고 있는 프로그램 인스턴스, 스레드 : 프로세스가 할당받은 자원을 이용하는 실행의 단위



## 프로그램 (Program)

> 어떤 작업을 위해 실행할 수 있는 파일
>
> 명령과 데이터로 구성되어 저장 장치에 저장된 형태의 실행 코드

컴퓨터에 의해 실행되는 명령과 데이터의 집합을 말한다.

시스템의 저장 장치(Storage Device)에 파일 형태로 저장되어 있으며,

중앙처리장치(CPU)에 의해 메모리(Memory)로 로딩되고 실행된다.



과거에는 컴퓨터가 동시에 하나의 프로그램만 실행 할 수 있었다.

ex)

A 프로그램 실행 중 B 프로그램 실행하려면, A를 먼저 종료해야만 B를 실행할 수 있었다.



컴퓨터 아키텍쳐의 진화와 컴퓨팅 기술 발전을 통해 상대적으로 빠른 속도의 CPU와 Mermoy의 효율적 사용 방법들이 연구 되었고, 결국 동시에 여러 프로그램이 실행 가능한 멀티 프로그램(Mulit Program, 실행 중인 프로그램을 종료 하지 않아도 다른 프로그램 실행 가능) 환경이 만들어졌다.



운영체제(Operating System)가 빠르게 발전되면서, 소프트웨어 분야에 조금 더 획기적인 변화가 일어나게 된다.

기존에 프로그램이 컴퓨터 하드웨어의 의해 직접적으로 실행되던 구조에서,

운영체제가 프로그램의 실행을 담당하는 구조로 변화된 것이다.

즉, 컴퓨터 하드웨어 리소스(CPU, Memory)에 대한 관리를 담당하는 운영체제가 프로그램의 실행을 관리하게 됨으로써,

물리적인 공간(디스크)에 저장되어 있는 프로그램을 논리적인 공간(메모리)에서 실행되고, 리소스 할당과 관리를 운영체제가 담당하게 된 것이다.



시스템 리소스가 특정 프로그램에 의해 관리되지 않는 것, 프로그램이 운영체제에 의해 논리적인 공간에서 실행된다는 것은 시스템 효율 측명에서 큰 장점을 가져다 준다. 바로 "여러 개의 프로그램을 동시에" 또는 "하나의 프로그램을 동시에 여러 개" 실행할 수 있게 해준다.

이렇게, 현재 메모리에 로딩되고 실행 중인 프로그램을 프로세스 (Process) 라고 부른다.





## 프로세스 (Process)

> 메모리에 올라와 실행되고 있는 프로그램의 인스턴스
>
> 운영체제에 의해 메모리에 적재되어 실행 중인 프로그램

- 컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램
- 메모리에 올라와 실행되고 잇는 프로그램의 인스턴스 (독립적인 개체)
- 운영체제로부터 시스템 자원을 할당받는 작업의 단위
- 동적인 개념으로는 실행된 프로그램



### 특징

![img](md-images/process.png)



- 프로세스는 각각 독립된 메모리 영역 (Code, Data, Stack, Heap의 구조)을 할당받는다.
- 기본적으로 프로세스당 최소 1개의 스레드(메인 스레드)를 가지고 있다.
- 각 프로세스는 별도의 주소 공간에서 실행되며, 한 프로세스는 다른 프로세스의 변수나 자료구조에 접근 할 수 없다.
- 한 프로세스가 다른 프로세스의 자원에 접근하려면 프로세스 간의 통신(IPC, Inter-Process Communication)을 사용해야 한다. (ex 파이프, 파일, 소켓 등을 이용한 통신 방법 이용)



운영체제에 의해 프로그램이 메모리에 로드되고 프로세스가 실행되면, 프로세스는 자신의 코드 시작점부터 시작하여 종료지점까지 순차적인 (Sequential) 실행 흐름을 가진다. 흔히 main() 함수에서 시작하여 종료 지점까지 코드 순서대로 실행되는 것이다.



만약, main() 함수에서 시작되는 하나의 코드 실행 흐름만으로 처리하기 힘든 동작을 구현해야 하는 상황이라면 어떻게 해야 할까?

ex) 프로세스의 main() 함수에서, USB 메모리에 저장된 파일을 복사함과 동시에, 네트워크를 통해 수신되는 파일도 복사해야 하는 상황

 main() 함수의 실행흐름은 USB 메모리의 파일을 복사하는 중이기 떄문에, 실시간으로 네트워크를 통해 수신되는 파일을 복사하는 코드가 실행될 수 없게 된다.

이런 경우, USB 메모리의 파일을 복사하는 실행 흐름에 더하여, 네트워크로 부터 수신 되는 파일을 저장하는 또 하나의 실행 흐름을 만드는 것이다.



즉, main() 함수의 실행 흐름과 구분되는, 동시에 실행가능한 추가적인 실행 흐름을 만들고 실행하면, 두 가지 작업을 동시에 처리할 수 있게 되는 것이다.



프로세스 내에서 실행되는 각각의 "독립적인 실행 흐름", 이것을 스레드(Thread) 라고 부르며,

하나의 프로세스 내에서 두 개 이상의 스레드가 동작하도록 프로그래밍 하는 것을 멀티스레드 프로그래밍(Multi-Thread Programming) 이라 부른다.



## 스레드 (Thread)

> 프로세스가 할당받은 자원을 이용하는 실행의 단위

- 프로세스 내에서 실행되는 여러 흐름의 단위
- 프로세스의 특정한 수행 경로
- 프로세스가 할당받은 자원을 이용하는 실행의 단위



### 특징

![img](md-images/thread.png)

- 스레드는 프로세스 내에서 각각 Stack만 따로 할당받고, Code, Data, Heap 영역은 공유한다.
- 한 프로세스 내에서 동작되는 여러 실행의 흐름으로, 프로세스 내의 주소 공간이나 자원들(힙 공간 등)을 같은 프로세스 내에서 스레드 끼리 공유하면서 실행된다.
- 같은 프로세스 안에 있는 여러 스레드들은 같은 힙 공간을 공유한다. 반면에 프로세스는 다른 프로세스의 메모리에 직접 접근 할 수 없다.
- 각각의 스레드는 별도의 레지스터와 스택을 갖고 있지만, 힙 메모리는 서로 읽고 쓸 수 있다.
- 한 스레드가 프로세스 자원을 변경하면, 다른 이웃 스레드(sibling thread) 도 그 변경 결과를 즉시 볼 수 있다.



mian() 함수라고 일컫는, 프로세스의 시작과 동시에 실행되는 스레드를 메인 스레드 라고 부른다.



---

참고 사이트

개발자 레시피 : https://recipes4dev.tistory.com/143?category=768056